---
title: iso 7层模型-网络层-IP地址划分与子网
date: 2025-12-25
category:
  - web
  - 计算机网络
---

# IP地址划分与子网

在上一节中，我们了解了网络层通过 IP 地址来划分不同的“村庄”（网段）。这一节我们将深入探讨 IP 地址的分类、公网与私网的区别，以及如何通过子网划分来更高效地利用 IP 资源。

## 1. IP 地址的分类 (Classful Addressing)

最初，IP 地址被划分为五类，主要根据地址的前几位来区分：

| 类别 | 范围 | 默认子网掩码 | 用途 |
| :--- | :--- | :--- | :--- |
| **A类** | 1.0.0.0 - 126.255.255.255 | 255.0.0.0 (/8) | 用于超大型网络 |
| **B类** | 128.0.0.0 - 191.255.255.255 | 255.255.0.0 (/16) | 用于中型网络 |
| **C类** | 192.0.0.0 - 223.255.255.255 | 255.255.255.0 (/24) | 用于小型局域网 |
| **D类** | 224.0.0.0 - 239.255.255.255 | 无 | 组播地址 (Multicast) |
| **E类** | 240.0.0.0 - 255.255.255.255 | 无 | 保留用于科研 |

> **注意**：127.x.x.x 是环回地址（Loopback），用于本地测试，不属于 A 类可用地址。

## 2. 公网 IP 与 私网 IP

由于 IPv4 地址资源有限，我们不能给全世界每台电脑都分配一个唯一的公网 IP。因此引入了**私网地址**。

### 私网地址范围
这些地址只在局域网内部有效，不会在互联网上路由：
- **A类私有**：10.0.0.0 - 10.255.255.255
- **B类私有**：172.16.0.0 - 172.31.255.255
- **C类私有**：192.168.0.0 - 192.168.255.255

我们在家里或公司里看到的 `192.168.x.x` 就是私网地址。通过 **NAT (网络地址转换)** 技术，多个私网设备可以共用一个公网 IP 访问互联网。

## 3. 掩码：IP 地址的“灵魂”

很多人认为 IP 地址就是一个简单的数字，但实际上，**没有掩码的 IP 地址是没有意义的**。

### 默认掩码
当我们日常输入 IP 地址（比如在配置电脑网络时）如果不手动输入掩码，系统会根据 IP 的类别自动补全**默认掩码**。
- 如果你输入 `192.168.1.1`，系统默认它是 C 类，掩码就是 `255.255.255.0`。

### 掩码的作用
掩码决定了**你的邻居是谁**。
- **网络位**：掩码为 1 的部分，代表你所在的“村庄”。
- **主机位**：掩码为 0 的部分，代表你是村里的“哪一户”。

**强调**：掩码告诉计算机，哪些 IP 是可以直接“喊话”（ARP）就能到的，哪些 IP 是必须经过“邮局”（网关/路由器）转发的。

## 4. 子网划分 (Subnetting)

如果一个 C 类网段（254 个可用地址）太大了，或者我们想把财务部和技术部的网络隔离开，就需要进行**子网划分**。

子网划分的本质是：**向主机位“借”位作为子网位**。

### 举个例子
假设你有一个 C 类网段：`192.168.1.0/24`。
默认掩码是 `255.255.255.0`。

现在你想把它平均分成 **2 个子网**：
1. **借位**：为了分 2 个子网，我们需要借 1 位主机位（$2^1 = 2$）。
2. **新掩码**：原来的掩码是 24 位，现在变成了 **25 位**。
   - 二进制：`11111111.11111111.11111111.10000000`
   - 十进制：`255.255.255.128`

3. **划分结果**：
   - **子网 A**：`192.168.1.0/25`
     - 地址范围：`192.168.1.0` - `192.168.1.127`
     - 可用主机：`.1` 到 `.126`（`.0` 是网络号，`.127` 是广播地址）
   - **子网 B**：`192.168.1.128/25`
     - 地址范围：`192.168.1.128` - `192.168.1.255`
     - 可用主机：`.129` 到 `.254`（`.128` 是网络号，`.255` 是广播地址）

通过这种方式，即使物理上连在同一个交换机上，只要掩码配置正确，这两个子网的机器也无法直接通信，必须通过路由器，从而实现了逻辑上的隔离。
