---
title: vlan隔离-软件实现网络隔离
date: 2025-12-22
category:
  - web
  - 计算机网络
---

## 帧结构

先回忆一下以太网帧的基本结构：
| 字段名称   | 长度（字节） | 作用说明               |
|------------|--------------|------------------------|
| 前导码     | 7            | 帧开始的标志，同步时钟 |
| 帧开始定界符 | 1          | 标记帧正式开始         |
| 目的MAC地址 | 6           | 目标设备的物理地址     |
| 源MAC地址   | 6           | 发送设备的物理地址     |
| 类型/长度   | 2           | 上层协议类型或数据长度 |
| 数据部分    | 46~1500      | 实际传输的数据         |
| CRC校验     | 4           | 检查数据是否出错       |

VLAN（虚拟局域网）相关信息会在以太网帧结构中插入额外的数据字段。具体来说，VLAN 会在“源MAC地址”和“类型/长度”字段之间插入一个4字节的VLAN Tag（也叫802.1Q Tag），用于标识VLAN ID等信息。

插入后，帧结构如下：

| 字段名称         | 长度（字节） | 说明                  |
|------------------|--------------|-----------------------|
| 前导码           | 7            | 同步时钟              |
| 帧开始定界符     | 1            | 帧正式开始            |
| 目的MAC地址      | 6            | 目标设备物理地址      |
| 源MAC地址        | 6            | 发送设备物理地址      |
| VLAN Tag（802.1Q）| 4           | VLAN相关信息（含VLAN ID）|
| 类型/长度        | 2            | 上层协议类型或数据长度|
| 数据部分         | 46~1500      | 实际传输的数据        |
| CRC校验          | 4            | 检查数据是否出错      |