---
date: 2024-12-12
category:
  - Linux
tag:
  - Linux
  - 文本管理
  - cat
  - more
  - less
---

# Linux 系统操作篇（2）- 文本文件管理

> Linux 中常用的文本查看和编辑命令详解。

### 系统操作篇(2) - 文本文件管理

#### 1. 文本查看命令

##### cat

* 文本内容显示到终端

##### head

* 查看文件开头文本内容 10

##### tail

* 查看文件结尾文本内容 10
* 常使用选项`-f`，当文件内容更新后，显示内容同步更新

```shell
cat /etc/passwd # 可以同时查看多个文件

head /etc/passwd # 默认显示10行
head -5 /etc/passwd

tail /etc/passed # 默认显示10行
tail -5 /etc/passed

# 在/root目录运行脚本
# chmod +x countor.sh
# ./countor.sh &
tail -f /tmp/demo # ctrl+c退出
```

##### wc

* 统计文件内容信息
* 常用选项`-l`，统计文件行数

```shell
wc -l /tmp/demo
```

##### more

* 分行显示
* 一般配合cat命令和管道符使用，提供分行显示

```shell
cat /tmp/demo | more
```

#### 2. 打包和压缩

备份 -》 恢复

磁盘 

##### Linux的备份压缩

* 最早的备份介质是磁带，使用的命令是tar
* 可以将打包后的磁带文件进行压缩存储，压缩命令是gzip和bzip2
* 经常使用的扩展名是.tar.gz，.tar.bz2，.tgz(.tar.gz缩写)

##### 打包

* 选项`c`表示打包
* 选择`f`表示打包成文件

```shell
tar cf /tmp/etc-backup.tar /etc
ls -lh /tmp/etc-backup.tar
```

##### 压缩和解压缩

* gzip
* bzip2，压缩比更高，但是压缩速度较慢
* 一般直接使用tar完成打包同时进行压缩

```shell
tar czf /tmp/etc-backup.tar.gz /etc # gzip压缩
tar cjf /tmp/etc-backup.tar.bz2 /etc # bzip2压缩
```

##### 解包

* 选项`x`表示解包
* 选项`C`表示解包位置

```shell
tar xf /tmp/etc-backup.tar -C /root
tar xzf /tmp/etc-backup.tar.gz -C /root
```

#### 3. vi/vim编辑工具

##### 四种模式

* Normal模式：使用命令
* Insert模式：编辑文本
* Comand模式（末行模式）：退出，保持等操作
* Visual模式：块处理

##### 模式切换

```shell
vi /tmp/test # 新建一个文本文件
# 默认进入为普通模式

# 按 i 或 a 进入插入模式

# 按 ESC键 退回普通模式

# 按 : 进入末行模式
```

##### 命令模式

* 进入插入模式
  * i 在光标当前位置插入
  * I 在光标行首插入
  * a在光标后一个位置插入
  * A在光标行尾插入
  * o在光标行下一行插入
  * O在光标行上一行插入
* 复制
  * yy 复制当前行
  * 数字yy 复制多行
  * y$ 复制光标到行尾
* 剪切
  * dd 剪切当前行
  * 数字dd 剪切多行
  * d$ 剪切光标到行尾
* 粘贴
  * p 光标当前行粘贴
* 撤销
  * u 撤销
  * ctrl+r 重做
* 单字符操作
  * x 删除
  * r，再输入新字符 替换
* 移动光标
  * 数字G 移动到指定行
  * g 移动到文件第一行
  * G 移动到文件末行
  * ^ 移动到行首
  * $ 移动到行尾

##### 末行模式

* 退出

  * 退出 :q

  * 强制退出 :q!

  * 保存退出 :wq

  * 保存到指定文件 :w /tmp/text2

  * 强制保存退出 :wq!

* 行号

  * 设置行号 :set nu

  * 取消行号 :set nonu

* 高亮显示

  * 去掉高亮显示  :set nohlsearch
  * 高亮显示  :set hlsearch

* 临时执行命令 :! 执行后按回车返回vi
* 搜索
  * /要搜索的字符   如果有多个，可以按`n`移到下一个，按`N`移到上一个
  * :s/旧字符/新字符  用新字符替换当前行旧字符
  * :%s/旧字符/新字符  用新字符替换所有行旧字符
  * :%s/旧字符/新字符/g  用新字符替换所有行的旧字符,有多个则多次替换
  * :开始行,结束行s/旧字符/新字符  在指定行用新字符替换旧字符

##### 可视模式

* v  字符可视模式
* V  行可视模式
* ctrl+v  块可视模式
  * 配合d和I命令可以进行块操作